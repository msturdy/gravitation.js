/*! gravitation.js 2015-04-12 */
function Bullet(a,b){this.x=a.x,this.y=a.y,this.speed=25,this.dirn=b,this.draw=function(){ctx.fillRect(this.x,this.y,5,5)},this.move=function(){this.x=this.x+Math.cos(this.dirn)*this.speed,this.y=this.y+Math.sin(this.dirn)*this.speed},this.update=function(){this.move(),this.draw()}}function Ship(a,b){this.x=a.x,this.y=a.y,this.speed=1,this.dirn=0,this.randomDirection=function(){return 2*Math.random()*Math.PI},this.draw=function(){var a=this.x+15*Math.cos(this.dirn),c=this.y+15*Math.sin(this.dirn),d=this.x+8*Math.cos(this.dirn+Math.PI*(9/16)),e=this.y+8*Math.sin(this.dirn+Math.PI*(9/16)),f=this.x+8*Math.cos(this.dirn-Math.PI*(9/16)),g=this.y+8*Math.sin(this.dirn-Math.PI*(9/16));b.beginPath(),b.moveTo(a,c),b.lineTo(d,e),b.lineTo(f,g),b.lineTo(a,c),b.stroke()},this.move=function(){this.x=this.x+Math.cos(this.dirn)*this.speed,this.y=this.y+Math.sin(this.dirn)*this.speed,(this.x<0||this.y<0||this.x>b.height||this.y>b.width||Math.random()>.99)&&(this.dirn=this.randomDirection())},this.fire=function(){var a={x:this.x,y:this.y};game.bullets.push(new Bullet(a,this.dirn))},this.update=function(){this.move(),this.draw(),Math.random()>.99&&this.fire()}}var levels={1:[],2:[]},Game={ships:[],bullets:[],init:function(a){return this.ctx=a,console.log("Game started"),this.ships.push(new Ship({x:50,y:150},this.ctx)),this.ships.push(new Ship({x:250,y:350},this.ctx)),this.ships.push(new Ship({x:450,y:400},this.ctx)),console.log("Ships added"),console.log(this.ships),this},update:function(){var a=window.game,b=a.ships,c=a.bullets;this.ctx.clearRect(0,0,750,500),b.forEach(function(a){a.update()}),c.forEach(function(b,c){b.update(),(b.x<0||b.y<0||b.x>this.ctx.height||b.y>this.ctx.width)&&a.bullets.splice(c,1)}),window.requestAnimationFrame(a.update)}},canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),game=Game.init(ctx);window.requestAnimationFrame(game.update);