/*! gravitation.js 2015-04-07 */
function Bullet(a,b){this.x=a.x,this.y=a.y,this.speed=25,this.direction=b,this.draw=function(){ctx.fillRect(this.x,this.y,5,5)},this.move=function(){this.x=this.x+Math.cos(this.direction)*this.speed,this.y=this.y+Math.sin(this.direction)*this.speed},this.update=function(){this.move(),this.draw()}}function Ship(a,b){this.x=b.x,this.y=b.y,this.speed=1,this.direction=0,this.randomDirection=function(){return 2*Math.random()*Math.PI+2*Math.PI},this.draw=function(){var b=this.x,c=this.y;a.beginPath(),a.moveTo(b,c),a.lineTo(b+5,c+15),a.lineTo(b-5,c+15),a.fill()},this.move=function(){this.x=this.x+Math.cos(this.direction)*this.speed,this.y=this.y+Math.sin(this.direction)*this.speed,(this.x<0||this.y<0||this.x>a.height||this.y>a.width||Math.random()>.9)&&(this.direction=this.randomDirection())},this.fire=function(){var a={x:this.x,y:this.y};game.bullets.push(new Bullet(a,this.direction))},this.update=function(){this.move(),this.draw(),Math.random()>.99&&(this.fire(),console.log(game))}}var levels={1:[],2:[]},Game={ships:[],bullets:[],init:function(a){return this.ctx=a,console.log("Game started"),this.ships.push(new Ship(this.ctx,{x:50,y:150})),this.ships.push(new Ship(this.ctx,{x:250,y:350})),this.ships.push(new Ship(this.ctx,{x:450,y:400})),console.log("Ships added"),console.log(this.ships),this},draw:function(){var a=window.game,b=a.ships,c=a.bullets;this.ctx.clearRect(0,0,750,500),b.forEach(function(a){a.update()}),c.forEach(function(b,c){b.update(),(b.x<0||b.y<0||b.x>this.ctx.height||b.y>this.ctx.width)&&a.bullets.splice(c,1)}),window.requestAnimationFrame(a.draw)}},canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),game=Game.init(ctx);window.requestAnimationFrame(game.draw);